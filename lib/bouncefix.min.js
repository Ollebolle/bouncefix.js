/*!
 * v0.0.3
 * Copyright (c) 2013 Jarid Margolin
 * bouncefix.js is open sourced under the MIT license.
 */
!function(a,b){function c(a){return a?(this.className=a,this.startListener=new d(b,{evt:"touchstart",handler:this.touchStart,context:this}).add(),this.endListener=new d(b,{evt:"touchend",handler:this.touchEnd,context:this}).add(),void 0):!1}function d(a,b){this.evt=b.evt,this.el=a,this.handler=b.handler,b.context&&(this.handler=function(a){b.handler.call(b.context,a)})}var e={Fix:c,cache:{}};e.add=function(a){this.cache[a]||(this.cache[a]=new this.Fix(a))},e.remove=function(a){this.cache[a]&&(this.cache[a].remove(),delete this.cache[a])},c.prototype.touchStart=function(a){if(this.target=f.getTargetedEl(a.target,this.className),this.target){if(f.isScrollable(this.target))return f.scrollToEnd(this.target);this.endListener=new d(this.target,{evt:"touchmove",handler:this.touchMove,context:this}).add()}},c.prototype.touchMove=function(a){a.preventDefault()},c.prototype.touchEnd=function(){this.moveListener&&this.moveListener.remove()},c.prototype.remove=function(){this.startListener.remove(),this.endListener.remove()};var f={};f.getTargetedEl=function(a,b){for(;;){if(a.classList.contains(b))break;if(!(a=a.parentElement))break}return a},f.isScrollable=function(a){return a.scrollHeight>a.offsetHeight},f.scrollToEnd=function(a){var b=a.scrollTop,c=a.offsetHeight,d=a.scrollHeight;0>=b&&(a.scrollTop=1),b+c>=d&&(a.scrollTop=d-c-1)},d.prototype.add=function(){this.el.addEventListener(this.evt,this.handler,!1)},d.prototype.remove=function(){this.el.removeEventListener(this.evt,this.handler)},"undefined"!=typeof a&&(a.bouncefix=e)}(window,document);