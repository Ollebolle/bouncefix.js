!function(a,b){"function"==typeof define&&define.amd?define([],function(){return a.returnExportsGlobal=b()}):"object"==typeof exports?module.exports=b():a.bouncefix=b()}(this,function(){var a,b;return a=function(){var a=function(a,b,c,d){this.el=a,this.eventName=b,this.handler=c,this.context=d,this.add()};return a.prototype.remove=function(){this.el.removeEventListener(this.eventName,this.cachedHandler)},a.prototype.add=function(){var a=this;a.cachedHandler=function(b){a._handler.call(a,b,this)},a.el.addEventListener(a.eventName,a.cachedHandler,!1)},a.prototype._handler=function(a,b){var c={};for(var d in a)c[d]=a[d];c.stopPropagation=function(){a.stopPropagation?a.stopPropagation():a.cancelBubble=!0},c.preventDefault=function(){a.preventDefault?a.preventDefault():a.returnValue=!1},this.handler.call(this.context||b,c)},a}(),b=function(b){var c=a;return{selectors:{},listeners:{},initialize:function(a){Element.prototype.matches&&(a&&this.add(a),this.initialized||(this._addListener(document,"touchstart",this._onTouchStart),this._addListener(document,"touchend",this._onTouchEnd)),this.initialized=!0)},add:function(a){this._eachSelector(a,function(a){this.selectors[a]=!0})},remove:function(a){return a?void this._eachSelector(a,function(a){delete this.selectors[a]}):this.selectors={}},teardown:function(){this.remove();for(var a in this.listeners)this._removeListener(a)},_eachSelector:function(a,b){for(var c=a.replace(/\s+/g,"").split(","),d=0,e=c.length;e>d;d++)b.call(this,c[d])},_onTouchStart:function(a){var b=a.targetTouches[0].target,c=this._getFirstTargetedEl(b);return c&&this._isScrollable(c)?this._scrollToEnd(c):(this.canScrollUp=!!this._getElFromTree(b,this._canScrollUp),this.canScrollDown=!!this._getElFromTree(b,this._canScrollDown),this.touchStartY=a.targetTouches[0].screenY,this.disableScroll=!1,void this._addListener(b,"touchmove",this._onTouchMove))},_onTouchMove:function(a){if(this.disableScroll)return a.preventDefault();var b=a.targetTouches[0].screenY>this.touchStartY,c=a.targetTouches[0].screenY<this.touchStartY;return b&&this.canScrollUp||c&&this.canScrollDown?void 0:(this.disableScroll=!0,a.preventDefault())},_onTouchEnd:function(a){this._removeListener("touchmove")},_getFirstTargetedEl:function(a){return this._getElFromTree(a,function(a){var b=!1;for(var c in this.selectors)if(a.matches(c))return b=!0;return b})},_getElFromTree:function(a,b){return a!==document.body?b.call(this,a)?a:this._getElFromTree(a.parentNode,b):void 0},_isScrollable:function(a){return a.scrollHeight>a.offsetHeight},_scrollToEnd:function(a){var b=a.scrollTop,c=a.offsetHeight,d=a.scrollHeight;0>=b&&(a.scrollTop=1),b+c>=d&&(a.scrollTop=d-c-1)},_canScrollUp:function(a){return a.scrollTop>0},_canScrollDown:function(a){var b=a.scrollHeight>a.clientHeight,c=a.scrollHeight-a.clientHeight===a.scrollTop;return b&&!c},_addListener:function(a,b,d){this.listeners[b]=new c(a,b,d,this)},_removeListener:function(a){this.listeners[a]&&(this.listeners[a].remove(),delete this.listeners[a])}}}({})});